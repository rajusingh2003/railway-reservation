<?php require 'db/connect.php'; session_start(); if (!isset($_SESSION['user'])) exit; if ($_SERVER['REQUEST_METHOD'] === 'POST') { $train_id = $_POST['train_id']; $seats = $_POST['seats']; $pnr = rand(1000000000, 9999999999); $uid = $_SESSION['user']; $stmt = $conn->prepare('INSERT INTO bookings (user_id, train_id, seats_booked, pnr) VALUES (?, ?, ?, ?)'); $stmt->bind_param('iiis', $uid, $train_id, $seats, $pnr); $stmt->execute(); echo 'Booking successful! Your PNR is: ' . $pnr; } ?>
<form method='POST'>Train ID: <input name='train_id'><br>Seats: <input name='seats'><br><button type='submit'>Book</button></form>